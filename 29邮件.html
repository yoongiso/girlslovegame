<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œå°</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .workspace {
            display: flex;
            flex-direction: column;
            min-height: 700px;
            position: relative;
            width: 100%;
        }

        .main-panel {
            display: flex;
            flex: 1;
            min-height: 600px;
            width: 100%;
        }

        .left-sidebar {
            width: 200px;
            border-right: 1px solid #E9ECF0;
            background-color: #F8FAFC;
            padding: 30px 0;
        }

        .tab-item {
            padding: 14px 24px;
            font-size: 15px;
            color: #64748B;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            margin-bottom: 4px;
        }

        .tab-item.active {
            background-color: #FFFFFF;
            color: #2C3A47;
            border-left: 3px solid #C49A6C;
            font-weight: 500;
        }

        .tab-item:hover:not(.active) {
            background-color: #F1F5F9;
            color: #4A5A6A;
        }

        .content-area {
            flex: 1;
            background-color: #FFFFFF;
            padding: 30px !important;
            position: relative;
            overflow-y: auto;
            max-height: 700px;
            max-width: none !important;
            margin: 0 !important;
        }

        .mail-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 800px;
        }

        .mail-item {
            display: grid;
            grid-template-columns: 200px 180px 1fr 80px;
            padding: 16px 20px;
            background-color: #F8FAFC;
            border: 1px solid #E9ECF0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            align-items: center;
        }

        .mail-item:hover {
            background-color: #F1F5F9;
            border-color: #C49A6C;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
        }

        .mail-subject {
            font-weight: 500;
            color: #2C3A47;
        }

        .mail-from {
            color: #64748B;
        }

        .mail-to {
            color: #8A9AA8;
            font-size: 13px;
        }

        .mail-date {
            color: #94A3B8;
            font-size: 13px;
            text-align: right;
        }

        .new-badge {
            background-color: #C49A6C;
            color: white;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 30px;
            margin-right: 8px;
            font-weight: 500;
            display: inline-block;
        }

        .replied-badge {
            background-color: #E2E8F0;
            color: #64748B;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 30px;
            margin-left: 8px;
            font-weight: 500;
            display: inline-block;
        }

        .school-header {
            font-size: 24px;
            font-weight: 500;
            color: #2C3A47;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 2px solid #E2D5C0;
            letter-spacing: 0.5px;
        }

        .intro-section {
            background-color: #F8FAFC;
            border-radius: 18px;
            padding: 28px;
            margin-bottom: 36px;
            border: 1px solid #E9ECF0;
            line-height: 1.8;
            color: #3F4D5C;
            font-size: 15px;
        }

        .intro-section p {
            margin-bottom: 18px;
        }

        .intro-section p:last-child {
            margin-bottom: 0;
        }

        .announcement-title {
            font-size: 20px;
            font-weight: 500;
            color: #2C3A47;
            margin-bottom: 20px;
        }

        .announcement-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .announcement-item {
            padding: 16px 20px;
            background-color: #F8FAFC;
            border: 1px solid #E9ECF0;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
            color: #2C3A47;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .announcement-item:hover {
            background-color: #F1F5F9;
            border-color: #C49A6C;
            transform: translateY(-2px);
            box-shadow: 0 6px 14px -6px rgba(0,0,0,0.05);
        }

        .announcement-badge {
            background-color: #E2D5C0;
            color: #4A5A6A;
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 30px;
            font-weight: 500;
        }

        .announcement-date {
            color: #8A9AA8;
            font-size: 13px;
            margin-left: auto;
        }

        .notice-detail {
            max-width: 800px;
        }

        .notice-detail h2 {
            font-size: 24px;
            font-weight: 500;
            color: #2C3A47;
            margin-bottom: 16px;
        }

        .notice-meta {
            color: #8A9AA8;
            font-size: 14px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #E9ECF0;
        }

        .notice-content {
            line-height: 1.8;
            color: #3F4D5C;
            font-size: 15px;
        }

        .notice-content p {
            margin-bottom: 20px;
        }

        .back-link {
            margin-top: 32px;
            color: #C49A6C;
            cursor: pointer;
            display: inline-block;
            font-size: 14px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* é‚®ä»¶å¼¹çª—æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(3px);
        }

        .quiz-modal {
            z-index: 2500 !important;
        }

        .image-gallery-modal {
            z-index: 3000 !important;
        }

        .modal-container {
            max-width: 650px;
            width: 90%;
            background-color: #FFFFFF;
            border-radius: 28px;
            box-shadow: 0 30px 60px -20px rgba(0,0,0,0.3);
            border: 1px solid #E9ECF0;
            overflow: hidden;
            animation: modal-appear 0.2s ease;
        }

        @keyframes modal-appear {
            from { opacity: 0; transform: scale(0.96); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 22px 28px;
            border-bottom: 1px solid #E9ECF0;
            background-color: #F8FAFC;
            position: relative;
        }

        .modal-header .close-btn {
            position: absolute;
            right: 28px;
            top: 50%;
            transform: translateY(-50%);
        }

        .modal-header h3 {
            text-align: center;
            font-size: 18px;
            font-weight: 500;
            color: #2C3A47;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #94A3B8;
            transition: all 0.2s;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-btn:hover {
            background-color: #F1F5F9;
            color: #4A5A6A;
        }

        .modal-body {
            padding: 28px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .email-meta {
            background-color: #F8FAFC;
            padding: 16px 20px;
            border-radius: 16px;
            margin-bottom: 28px;
            border: 1px solid #E9ECF0;
            font-size: 14px;
            color: #4A5A6A;
            line-height: 1.8;
        }

        .email-meta div {
            margin-bottom: 6px;
        }

        .email-meta .label {
            color: #8A9AA8;
            width: 70px;
            display: inline-block;
        }

        .email-content {
            color: #2C3A47;
            line-height: 1.8;
            font-size: 15px;
            white-space: pre-line;
        }

        .email-content p {
            margin-bottom: 20px;
        }

        .email-highlight {
            font-weight: 600;
            color: #2C3A47;
            background-color: #F8F2E9;
            padding: 0 4px;
        }

        .modal-footer {
            padding: 20px 28px 28px;
            border-top: 1px solid #E9ECF0;
            text-align: right;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .btn-reply {
            background-color: #4A5A6A;
            color: white;
            border: none;
            padding: 12px 36px;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 400;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #5D6F80;
        }

        .btn-reply:hover {
            background-color: #5D6F80;
            transform: translateY(-2px);
            box-shadow: 0 6px 14px -6px rgba(58,74,94,0.3);
        }

        .btn-reply-disabled {
            background-color: #E2E8F0;
            color: #8A9AA8;
            border: 1px solid #D0D9E2;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-reply-disabled:hover {
            background-color: #E2E8F0;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background-color: #FFFFFF;
            color: #4A5A6A;
            border: 1px solid #C49A6C;
            padding: 12px 36px;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background-color: #F8F2E9;
            transform: translateY(-2px);
            box-shadow: 0 6px 14px -6px rgba(196,154,108,0.3);
        }

        .login-form {
            margin-top: 16px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: center;
        }

        .form-label {
            display: block;
            font-size: 14px;
            color: #4A5A6A;
            margin-bottom: 6px;
        }

        .form-input {
            width: 70%;
            max-width: 280px;
            padding: 12px 16px;
            border: 1px solid #E2E8F0;
            border-radius: 40px;
            font-size: 14px;
            background-color: #F8FAFC;
            transition: all 0.2s;
            display: block;
            margin: 0 auto;
        }

        .form-input:focus {
            outline: none;
            border-color: #C49A6C;
            background-color: #FFFFFF;
            box-shadow: 0 0 0 3px rgba(196,154,108,0.1);
        }

        .login-error {
            color: #C45A6C;
            font-size: 14px;
            margin-top: 12px;
            text-align: center;
            min-height: 20px;
        }

        .btn-login {
            background-color: #4A5A6A;
            color: white;
            border: none;
            padding: 14px 36px;
            border-radius: 40px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #5D6F80;
            width: auto;
            min-width: 140px;
            max-width: 180px;
            margin: 16px auto 0;
            display: block;
        }

        .btn-login:hover {
            background-color: #5D6F80;
            transform: translateY(-2px);
            box-shadow: 0 6px 14px -6px rgba(58,74,94,0.3);
        }

        .email-verify-container {
            text-align: center;
            margin: 10px 0;
        }

        .email-hint {
            color: #4A5A6A;
            font-size: 15px;
            margin-bottom: 16px;
        }

        .email-input-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            margin-bottom: 20px;
        }

        .email-prefix {
            width: 180px;
            padding: 12px 16px;
            border: 1px solid #E2E8F0;
            border-radius: 40px 0 0 40px;
            font-size: 14px;
            background-color: #F8FAFC;
            transition: all 0.2s;
            text-align: right;
        }

        .email-prefix:focus {
            outline: none;
            border-color: #C49A6C;
            background-color: #FFFFFF;
            box-shadow: 0 0 0 3px rgba(196,154,108,0.1);
        }

        .email-domain {
            background-color: #E2E8F0;
            color: #4A5A6A;
            padding: 12px 20px;
            border-radius: 0 40px 40px 0;
            font-size: 14px;
            white-space: nowrap;
            border: 1px solid #E2E8F0;
            border-left: none;
        }

        .email-error {
            color: #C45A6C;
            font-size: 14px;
            margin-top: 12px;
            text-align: center;
            min-height: 20px;
        }

        .btn-email-submit {
            background-color: #4A5A6A;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #5D6F80;
            width: auto;
            min-width: 120px;
            margin: 16px auto 0;
            display: block;
        }

        .btn-email-submit:hover {
            background-color: #5D6F80;
            transform: translateY(-2px);
            box-shadow: 0 6px 14px -6px rgba(58,74,94,0.3);
        }

        .hidden {
            display: none;
        }

        .progress-corner {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #FFFFFF;
            border: 1px solid #E9ECF0;
            border-radius: 40px;
            padding: 8px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
            font-size: 14px;
            color: #8A9AA8;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(4px);
            background-color: rgba(255,255,255,0.9);
            z-index: 1100;
        }

        .progress-value {
            font-weight: 500;
            color: #4A5A6A;
            background-color: #F1F5F9;
            padding: 2px 10px;
            border-radius: 30px;
            font-size: 13px;
        }

        .forum-login-info p {
            margin-bottom: 4px;
            line-height: 1.3;
        }
        .forum-login-info p:first-of-type {
            margin-top: 16px;
        }

        #forum-login-modal .modal-container {
            max-width: 380px;
        }

        #forum-login-modal .modal-body {
            padding: 20px;
        }

        #forum-login-modal .login-form {
            margin-top: 8px;
        }

        #forum-login-modal .form-group {
            margin-bottom: 16px;
        }

        #forum-login-modal .form-input {
            width: 85%;
            max-width: 260px;
        }

        #forum-login-modal .btn-login {
            margin-top: 12px;
            padding: 12px 30px;
            min-width: 130px;
        }

        #email-verify-modal .modal-container {
            max-width: 400px;
        }

        .image-gallery-modal .modal-container {
            max-width: 1000px;
            width: 95%;
        }

        .image-gallery-modal .modal-body {
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            max-height: 90vh;
            overflow-y: auto;  /* å…è®¸bodyæ»šåŠ¨ */
        }
        .gallery-image-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            padding: 10px;
            /* ç§»é™¤æ‰€æœ‰é«˜åº¦é™åˆ¶ */
        }

        .gallery-image {
            max-width: 100%;
            max-height: 70vh;  /* ç›´æ¥é™åˆ¶å›¾ç‰‡æœ€å¤§é«˜åº¦ä¸ºè§†å£çš„70% */
            width: auto;
            height: auto;
            object-fit: contain;
            display: block;
            margin: 0 auto;
        }
        .gallery-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 16px;
            flex-shrink: 0;
        }
        .gallery-btn {
            background-color: #FFFFFF;
            border: 1px solid #C49A6C;
            color: #4A5A6A;
            padding: 8px 24px;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        .gallery-btn:hover {
            background-color: #F8F2E9;
            transform: translateY(-2px);
        }
        .gallery-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
            border-color: #E2E8F0;
        }
        .gallery-counter {
            color: #8A9AA8;
            font-size: 14px;
        }

        .quiz-modal .modal-container {
            max-width: 450px;
        }
        .quiz-question {
            color: #2C3A47;
            font-size: 16px;
            margin-bottom: 20px;
            text-align: center;
        }
        .quiz-input {
            width: 70%;
            max-width: 250px;
            padding: 12px 16px;
            border: 1px solid #E2E8F0;
            border-radius: 40px;
            font-size: 14px;
            margin: 0 auto 20px;
            display: block;
        }
        .quiz-options {
            margin-bottom: 24px;
        }
        .quiz-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 16px;
            border: 1px solid #E2E8F0;
            border-radius: 40px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quiz-option:hover {
            background-color: #F8FAFC;
            border-color: #C49A6C;
        }
        .quiz-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #C49A6C;
        }
        .quiz-option label {
            flex: 1;
            cursor: pointer;
            color: #4A5A6A;
        }

        @media (max-width: 800px) {
            .mail-item {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            .mail-date {
                text-align: left;
            }
            .left-sidebar {
                width: 120px;
            }
            .email-input-wrapper {
                flex-direction: column;
                gap: 8px;
            }
            .email-prefix {
                border-radius: 40px;
                width: 100%;
                text-align: left;
            }
            .email-domain {
                border-radius: 40px;
                border-left: 1px solid #E2E8F0;
                width: 100%;
                text-align: center;
            }
            .modal-footer {
                flex-direction: column;
                align-items: stretch;
            }
            .btn-reply, .btn-secondary {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- å›¾ç‰‡æŸ¥çœ‹å™¨å¼¹çª— -->
    <div class="modal-overlay hidden image-gallery-modal" id="image-gallery-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="gallery-title">é™„ä»¶å†…å®¹</h3>
                <button class="close-btn" id="close-gallery">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="gallery-image-container">
                    <img src="" alt="é™„ä»¶å›¾ç‰‡" class="gallery-image" id="gallery-image">
                </div>
                <div class="gallery-controls">
                    <button class="gallery-btn" id="gallery-prev">â† ä¸Šä¸€å¼ </button>
                    <span class="gallery-counter" id="gallery-counter">1/2</span>
                    <button class="gallery-btn" id="gallery-next">ä¸‹ä¸€å¼  â†’</button>
                </div>
            </div>
        </div>
    </div>

    <!-- é™„ä»¶è§£é”å¼¹çª— -->
    <div class="modal-overlay hidden quiz-modal" id="quiz-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="quiz-title">è§£é”é™„ä»¶</h3>
                <button class="close-btn" id="close-quiz">Ã—</button>
            </div>
            <div class="modal-body">
                <div id="quiz-content"></div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="simple-bar">
            <div class="simple-left">
                <span class="simple-dot"></span>
                <span>åœ£æ¨±é«˜çº§ç§ç«‹ä¸­å­¦</span>
            </div>
            <span id="current-time"></span>
        </div>

        <div class="workspace">
            <div class="search-bar">
                <div class="search-container">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" class="search-input" placeholder="è¾“å…¥å…³é”®è¯..." id="search-input">
                    <button class="search-button" id="search-button">æœç´¢</button>
                </div>
            </div>

            <div class="main-panel">
                <div class="left-sidebar">
                    <div class="tab-item active" id="tab-mail">ğŸ“§ é‚®ä»¶</div>
                    <div class="tab-item" id="tab-website">ğŸŒ åœ£æ¨±é«˜ä¸­å®˜ç½‘</div>
                </div>

                <div class="content-area" id="page-mail">
                    <div class="mail-list">
                        <!-- æ±Ÿæ¸…çš„é‚®ä»¶ - æ— æŒ‰é’® -->
                        <div class="mail-item" id="mail-jiangqing">
                            <span class="mail-subject">
                                <span class="new-badge">æ–°</span>
                                ã€æ–°ã€‘å§”æ‰˜é‚®ä»¶å›å¤
                            </span>
                            <span class="mail-from">æ±Ÿæ¸…</span>
                            <span class="mail-to">æ”¶ä»¶äººï¼škanming</span>
                            <span class="mail-date">2æœˆ17æ—¥</span>
                        </div>
                        
                        <!-- Farrellçš„é‚®ä»¶ -->
                        <div class="mail-item" id="mail-farrell">
                            <span class="mail-subject">
                                <span class="new-badge">æ–°</span>
                                å§”æ‰˜å’¨è¯¢ï¼šå®åŒ—å¸‚å æ¥¼æ¡ˆ
                            </span>
                            <span class="mail-from">Farrell</span>
                            <span class="mail-to">æ”¶ä»¶äººï¼škanming</span>
                            <span class="mail-date">2æœˆ17æ—¥</span>
                        </div>
                        
                        <!-- ä¹‹å‰çš„é‚®ä»¶ - å‡å·²å›å¤ -->
                        <div class="mail-item" id="mail-new" style="opacity:0.7;">
                            <span class="mail-subject">å§”æ‰˜é‚®ä»¶å›å¤</span>
                            <span class="mail-from">åŒ¿åç”¨æˆ·</span>
                            <span class="mail-to">æ”¶ä»¶äººï¼škanming</span>
                            <span class="mail-date">2æœˆ16æ—¥</span>
                        </div>
                        
                        <!-- åŸé‚®ä»¶ - å·²å›å¤ -->
                        <div class="mail-item" id="mail-1" style="opacity:0.7;">
                            <span class="mail-subject">å§”æ‰˜å’¨è¯¢ï¼šé«˜ä¸­å°‘å¥³æ—©æ‹</span>
                            <span class="mail-from">åŒ¿åç”¨æˆ·</span>
                            <span class="mail-to">æ”¶ä»¶äººï¼škanming</span>
                            <span class="mail-date">2æœˆ15æ—¥</span>
                        </div>
                    </div>
                </div>

                <div class="content-area hidden" id="page-website">
                    <div class="school-header">åœ£æ¨±é«˜çº§ç§ç«‹ä¸­å­¦</div>
                    <div class="intro-section">
                        <p>åœ£æ¨±é«˜çº§ç§ç«‹ä¸­å­¦åè½äºå®å—å¸‚åŒ—æ¢§åŒºæ™´å±±å—éº“ï¼Œä¾å±±é¢æµ·ï¼Œå››å­£æ¸©æ¶¦ã€‚æ ¡å›­å†…æ¨±æ—æ©é“ã€æ¢§æ¡æˆè«ï¼Œè¢«èª‰ä¸ºâ€œå®å—æœ€ç¾æ ¡å›­â€ã€‚</p>
                        <p>å­¦æ ¡äº1997å¹´åˆ›åŠï¼Œåˆè¡·æ˜¯ä¸ºæœ¬å¸‚é€‚é¾„å­¦ç”Ÿæä¾›æ¥è½¨å›½é™…çš„é«˜ä¸­æ•™è‚²ã€‚ä¸‰åå¹´æ¥ï¼Œåœ£æ¨±å§‹ç»ˆç§‰æŒâ€œå°è€Œç²¾â€çš„åŠå­¦ç†å¿µï¼Œä¸¥æ ¼æ§åˆ¶æ‹›ç”Ÿè§„æ¨¡ï¼Œè‡´åŠ›äºä¸ºæ¯ä¸€ä½å­¦ç”Ÿæä¾›å®šåˆ¶åŒ–çš„æˆé•¿è·¯å¾„ã€‚</p>
                        <p>åœ£æ¨±æ ¡è®­ä¸ºâ€œè‡´çŸ¥Â·ä¿®èº«Â·æµä¸–â€ï¼Œæ„åœ¨å¼•å¯¼å­¦ç”Ÿæ±‚çŸ¥æ±‚çœŸã€æ¶µå…»å“æ ¼ã€å¿ƒæ€€å¤©ä¸‹ã€‚</p>
                    </div>
                    <div class="announcement-title">ğŸ“¢ æ ¡å›­å…¬å‘Š</div>
                    <div class="announcement-list">
                        <div class="announcement-item" data-page="notice-forum">
                            <span class="announcement-badge">æ–°</span>
                            åœ£æ¨±é«˜æ ¡å®˜æ–¹è®ºå›æ­£å¼ä¸Šçº¿
                            <span class="announcement-date">2025.04.01</span>
                        </div>
                        <div class="announcement-item" data-page="notice-library">
                            <span class="announcement-badge">æ–°</span>
                            åœ£æ¨±Â·å­£é£å›¾ä¹¦é¦†å³å°†å¼€æ”¾
                            <span class="announcement-date">2025.02.27</span>
                        </div>
                        <div class="announcement-item" data-page="notice-evaluation">
                            å…³äºä¼˜åŒ–å­¦ç”Ÿè¯„ä»·åˆ¶åº¦çš„é€šçŸ¥
                            <span class="announcement-date">2024.07.25</span>
                        </div>
                    </div>
                </div>

                <div class="content-area hidden" id="page-notice-forum">
                    <div class="notice-detail">
                        <h2>åœ£æ¨±é«˜æ ¡å®˜æ–¹è®ºå›æ­£å¼ä¸Šçº¿</h2>
                        <div class="notice-meta">å‘å¸ƒéƒ¨é—¨ï¼šå­¦ç”Ÿå‘å±•ä¸­å¿ƒ   å‘å¸ƒæ—¥æœŸï¼š2025.04.01</div>
                        <div class="notice-content">
                            <p>ä¸ºåŠ å¼ºå®¶æ ¡æ²Ÿé€šï¼Œä¿ƒè¿›å­¦ç”Ÿä¹‹é—´å¥åº·æœ‰åºçš„äº¤æµäº’åŠ¨ï¼Œå­¦æ ¡å®˜æ–¹è®ºå›å³æ—¥èµ·æ­£å¼ä¸Šçº¿è¿è¡Œã€‚</p>
                            <p>æ­¤ä¸ºåœ£æ¨±å»ºæ ¡ä»¥æ¥é¦–ä¸ªå®˜æ–¹è®¤è¯çš„å­¦ç”Ÿç½‘ç»œç¤¾åŒºï¼Œæ—¨åœ¨ä¸ºå…¨ä½“åœ¨æ ¡ç”Ÿæä¾›ä¸€ä¸ªå®‰å…¨ã€å‹å–„ã€æœ‰å½’å±æ„Ÿçš„çº¿ä¸Šäº¤æµç©ºé—´ã€‚</p>
                            <p>è¯¥è®ºå›ä»…å‘åœ¨æ ¡å¸ˆç”Ÿå®¶é•¿å¼€æ”¾ï¼Œè¯·è®¤è¯ç™»å½•ï¼Œæ–‡æ˜å‘è¨€ï¼Œåˆè§„äº¤æµã€‚</p>
                            <p style="margin-top:24px; color:#C49A6C; cursor:pointer;" id="enter-forum-link">ã€ç‚¹æ­¤è¿›å…¥è®ºå›ã€‘</p>
                        </div>
                        <div class="back-link" data-back="website">â† è¿”å›å®˜ç½‘é¦–é¡µ</div>
                    </div>
                </div>

                <div class="content-area hidden" id="page-notice-library">
                    <div class="notice-detail">
                        <h2>åœ£æ¨±Â·å­£é£å›¾ä¹¦é¦†å³å°†å¼€æ”¾</h2>
                        <div class="notice-meta">å‘å¸ƒéƒ¨é—¨ï¼šæ€»åŠ¡å¤„   å‘å¸ƒæ—¥æœŸï¼š2025.02.27</div>
                        <div class="notice-content">
                            <p>ç»è¿‡18ä¸ªæœˆç²¾å¿ƒå»ºè®¾ï¼Œåœ£æ¨±é«˜çº§ç§ç«‹ä¸­å­¦æ–°å›¾ä¹¦é¦†â€”â€”â€œå­£é£å›¾ä¹¦é¦†â€å°†äºæœ¬æœˆæ­£å¼å‘å¸ˆç”Ÿå¼€æ”¾ã€‚</p>
                            <p>é¦†å†…è®¾æœ‰ç‹¬ç«‹å­¦ä¹ ä½216ä¸ªã€å°ç»„ç ”è®¨å®¤12é—´ï¼Œé…å¤‡æ™ºèƒ½é¢„çº¦ç³»ç»Ÿï¼Œå­¦ç”Ÿå¯åœ¨çº¿é¢„è®¢ã€‚</p>
                            <p style="margin-top:24px; color:#8A9AA8; font-size:14px;">ç‰¹åˆ«é¸£è°¢ï¼šå­£æ°é›†å›¢æèµ 6000ä¸‡å…ƒ</p>
                        </div>
                        <div class="back-link" data-back="website">â† è¿”å›å®˜ç½‘é¦–é¡µ</div>
                    </div>
                </div>

                <div class="content-area hidden" id="page-notice-evaluation">
                    <div class="notice-detail">
                        <h2>å…³äºä¼˜åŒ–å­¦ç”Ÿè¯„ä»·åˆ¶åº¦çš„é€šçŸ¥</h2>
                        <div class="notice-meta">å‘å¸ƒéƒ¨é—¨ï¼šæ•™åŠ¡å¤„   å‘å¸ƒæ—¥æœŸï¼š2024.07.25</div>
                        <div class="notice-content">
                            <p>ç»æ ¡åŠ¡ä¼šç ”ç©¶å†³å®šï¼Œè‡ªå³æ—¥èµ·å¯¹æˆ‘æ ¡å­¦ç”Ÿè¯„ä»·ä½“ç³»ä½œå¦‚ä¸‹ä¼˜åŒ–è°ƒæ•´ï¼š</p>
                            <p>ä¸€ã€ä¼˜åŒ–è€ƒè¯•ç»“æœå‘ˆç°æ–¹å¼</p>
                            <p>ä¸ºå‡è½»å­¦ç”Ÿå­¦ä¸šå‹åŠ›ï¼Œå­¦æ ¡å†³å®šä¸å†å…¬å¸ƒå…·ä½“è€ƒè¯•æ’åã€‚æœŸä¸­ã€æœŸæœ«åŠé˜¶æ®µæ€§æµ‹è¯•æˆç»©å°†ä»¥ABCç­‰çº§åˆ¶å‘ˆç°ï¼›</p>
                            <p>äºŒã€è®¾ç«‹â€œæœªæ¥ä»£è¨€äººâ€å¹´åº¦è¯„é€‰</p>
                            <p>ä¸ºé¼“åŠ±å­¦ç”Ÿå…¨é¢å‘å±•ï¼Œè‡ªæœ¬å­¦å¹´èµ·æ¯å­¦æœŸè¯„é€‰ä¸€åâ€œæœªæ¥ä»£è¨€äººâ€ï¼Œä½œä¸ºåœ£æ¨±æœ€é«˜æ•™è‚²è£èª‰çš„ä»£è¡¨ï¼›</p>
                            <p>â€œæœªæ¥ä»£è¨€äººâ€ä¸å”¯åˆ†æ•°è®ºï¼Œè€Œæ˜¯ç»¼åˆè€ƒé‡å¤šé¡¹æŒ‡æ ‡ï¼Œå­¦æ ¡å°†ä¸ºä»£è¨€äººé¢å‘å¥–æ¯ä¸è¯ä¹¦ã€‚</p>
                        </div>
                        <div class="back-link" data-back="website">â† è¿”å›å®˜ç½‘é¦–é¡µ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åŸé‚®ä»¶å¼¹çª— - å·²å›å¤çŠ¶æ€ -->
    <div class="modal-overlay hidden" id="email-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>å§”æ‰˜å’¨è¯¢ï¼šé«˜ä¸­å°‘å¥³æ—©æ‹</h3>
                <button class="close-btn" id="close-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="email-meta">
                    <div><span class="label">å‘ä»¶äººï¼š</span>åŒ¿åç”¨æˆ· xxxxxxxxx@mail.com</div>
                    <div><span class="label">æ”¶ä»¶äººï¼š</span>kanming@mail.com</div>
                    <div><span class="label">æ—¶é—´ï¼š</span>2026å¹´2æœˆ15æ—¥ 19:43</div>
                </div>
                <div class="email-content">
                    <p>æ‚¨å¥½ï¼Œæ•æˆ‘å†’æ˜§æ‰“æ‰°ã€‚ç»å‹äººæ¨èï¼Œæˆ‘æƒ³å§”æ‰˜æ‚¨è°ƒæŸ¥æˆ‘å¥³å„¿çš„æ‹çˆ±æƒ…å†µã€‚</p>
                    <p>è¿™å¬èµ·æ¥åƒä¸ªæ§åˆ¶æ¬²è¿‡å¤´çš„å˜æ€æ¯äº²ï¼Œä½†äº‹å®ä¸Šæˆ‘ä»¬æ¯å¥³å…³ç³»éå¸¸å¥åº·ï¼Œåªæ˜¯æœ€è¿‘å¥¹å¼€å§‹å˜å¾—æƒ…ç»ªæ— å¸¸ã€é¢‘é¢‘å´©æºƒï¼Œæˆ‘æ€€ç–‘å’Œæ‹çˆ±æœ‰å…³ï¼Œä¹Ÿè®¸å¯¹æ–¹å¹¶ä¸å€¼å¾—æ‰˜ä»˜ï¼Œæˆ‘éœ€è¦äº†è§£æ›´å¤šæ‰èƒ½åšå‡ºæ­£ç¡®çš„å¹²é¢„ã€‚</p>
                    <p>æˆ‘æœ‰<span class="email-highlight">3ä¸ªæ€€ç–‘å¯¹è±¡</span>ï¼Œéƒ½æ˜¯å¥¹çš„åŒæ ¡åŒå­¦ï¼Œä½œä¸ºæµ‹è¯•ï¼Œè¯·æ‚¨<span class="email-highlight">æ‰¾å‡ºä»–ä»¬çš„çœŸå®å§“åå¹¶åŒ¹é…èº«ä»½</span>ï¼›æäº¤æ­£ç¡®ç­”æ¡ˆåï¼Œæˆ‘ä¼šæ”¯ä»˜ä¸‹ä¸€ç¬”ä½£é‡‘ã€‚</p>
                    <p>æˆ‘çš„å¥³å„¿å°±è¯»äº<span class="email-highlight">åœ£æ¨±é«˜çº§ç§ç«‹ä¸­å­¦</span>ï¼Œå­¦æ ¡å®˜ç½‘å·²ç»é”å®šè‡³æ‚¨çš„æ¡Œé¢ä¸»æ ï¼Œæˆ‘å¸Œæœ›æ‚¨èƒ½ä¸“å¿ƒå¤„ç†æˆ‘çš„å§”æ‰˜ã€‚</p>
                    <p>æˆ‘å¥³å„¿åå«<span class="email-highlight">æ±Ÿé›¨è–‡</span>ã€‚</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-reply btn-reply-disabled" disabled>å·²å›å¤</button>
            </div>
        </div>
    </div>

    <!-- æ—§å›å¤é‚®ä»¶å¼¹çª— - å·²å›å¤çŠ¶æ€ -->
    <div class="modal-overlay hidden" id="new-email-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>é‚®ä»¶å›å¤ï¼šé«˜ä¸­å°‘å¥³æ—©æ‹</h3>
                <button class="close-btn" id="close-new-modal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="email-meta">
                    <div><span class="label">å‘ä»¶äººï¼š</span>åŒ¿åç”¨æˆ· xxxxxxxxx@mail.com</div>
                    <div><span class="label">æ”¶ä»¶äººï¼š</span>kanming@mail.com</div>
                    <div><span class="label">æ—¶é—´ï¼š</span>2026å¹´2æœˆ16æ—¥ 10:23</div>
                </div>
                <div class="email-content">
                    <p>æ‚¨çš„å›ç­”å®Œå…¨æ­£ç¡®ã€‚æ²¡æœ‰è¾œè´Ÿæˆ‘çš„æœŸæœ›ã€‚</p>
                    <p>â€¦â€¦ä½†ç›®å‰è¯æ®è¿˜ä¸è¶³ï¼Œæ— æ³•é”å®šæˆ‘å¥³å„¿çœŸæ­£çš„æ—©æ‹å¯¹è±¡ã€‚ä¸ºäº†ååŠ©æ‚¨çš„è°ƒæŸ¥ï¼Œæˆ‘ä¸ºæ‚¨ç”³è¯·äº†å­¦æ ¡å†…éƒ¨è´¦å·ï¼Œæ‚¨ç°åœ¨å¯ä»¥ç™»å½•<span class="email-highlight">æ ¡å›­è®ºå›</span>ï¼Œæœç´¢æ›´å¤šèµ„æ–™ã€‚ä¸è¿‡è´¦å·åŠŸèƒ½å—é™ï¼Œåªèƒ½æµè§ˆï¼Œæ— æ³•äº’åŠ¨ç§ä¿¡ã€‚</p>
                    <p>æˆ‘çš„<span class="email-highlight">é‚®ç®±å‰ç¼€</span>æ˜¯æˆ‘çš„<span class="email-highlight">çœŸå®å§“å</span>ã€‚ç­‰ä½ ç ´è§£ä¹‹åå†æ‰¾æˆ‘å§ã€‚</p>
                </div>
                <div class="forum-login-info">
                    <p>åœ£æ¨±é«˜æ ¡è®ºå›ç™»å½•ï¼š</p>
                    <p>è´¦å·ï¼šlinshizhanghao</p>
                    <p>å¯†ç ï¼š889556</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-reply btn-reply-disabled" disabled>å·²å›å¤</button>
            </div>
        </div>
    </div>

    <!-- æ±Ÿæ¸…æ–°é‚®ä»¶å¼¹çª— - æ— æŒ‰é’®ï¼ŒåªæŸ¥çœ‹ -->
    <div class="modal-overlay hidden" id="jiangqing-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>ã€æ–°ã€‘å§”æ‰˜é‚®ä»¶å›å¤</h3>
                <button class="close-btn" id="close-jiangqing">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="email-meta">
                    <div><span class="label">å‘ä»¶äººï¼š</span>æ±Ÿæ¸… jiangqing@mail.com</div>
                    <div><span class="label">æ”¶ä»¶äººï¼š</span>kanming@mail.com</div>
                    <div><span class="label">æ—¶é—´ï¼š</span>2026å¹´2æœˆ17æ—¥ 09:15</div>
                </div>
                <div class="email-content">
                    <p>æ‚¨çš„é€Ÿåº¦è¿˜çœŸæ˜¯è¶…å‡ºæˆ‘çš„æƒ³è±¡ã€‚</p>
                    <p>â€¦éœ¸å‡Œå—ï¼Ÿç¡®å®æ˜¯ä¸ªè®©æˆ‘æ„å¤–çš„ç­”æ¡ˆã€‚é›¨è–‡ä»å°è¦å¼ºï¼Œæˆ‘åˆå¿™äºå·¥ä½œï¼Œå¯¹å¥¹çš„å…³å¿ƒä¸è¶³ã€‚ä¹Ÿè®¸æ­£æ˜¯å¥¹çš„ä¼˜ç§€æ‹›è‡´äº†åˆ«äººçš„å¿Œå¦’ã€‚</p>
                    <p>æˆ‘ä¼šè”ç³»æ ¡æ–¹åšè¿›ä¸€æ­¥è°ƒæŸ¥ï¼Œå¦‚æœä½ æœ‰æ–°çš„å‘ç°å¯ä»¥éšæ—¶è”ç³»æˆ‘ã€‚</p>
                    <p>å®¶é•¿åœˆå­é‡Œæ¶ˆæ¯ä¼ å¾—å¾ˆå¿«ï¼Œå¯èƒ½ä¼šæœ‰éœ¸å‡Œè€…çš„å®¶é•¿è¯•å›¾ä¸ä½ å»ºè”ã€‚è¯·ä¸è¦è¿‡å¤šæ¥è§¦ã€‚</p>
                    <p>ä½£é‡‘å…¨æ¬¾å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘å¸Œæœ›èƒ½ä»¥æœ€å¿«çš„é€Ÿåº¦æ‰“ç»™æ‚¨ã€‚</p>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Farrellé‚®ä»¶å¼¹çª— - å¸¦é™„ä»¶å’ŒæŒ‰é’® -->
    <div class="modal-overlay hidden" id="farrell-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>å§”æ‰˜å’¨è¯¢ï¼šå®åŒ—å¸‚å æ¥¼æ¡ˆ</h3>
                <button class="close-btn" id="close-farrell">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="email-meta">
                    <div><span class="label">å‘ä»¶äººï¼š</span>Farrell Farrell@mail.utoronto.ca</div>
                    <div><span class="label">æ”¶ä»¶äººï¼š</span>kanming@mail.com</div>
                    <div><span class="label">æ—¶é—´ï¼š</span>2026å¹´2æœˆ17æ—¥ 11:42</div>
                </div>
                <div class="email-content">
                    <p>å¬è¯´æ‚¨æ“…é•¿åšç½‘ç»œèµ„æ–™åˆ†æï¼Œæˆ‘æƒ³å§”æ‰˜æ‚¨è°ƒæŸ¥å®åŒ—å¸‚<span class="email-highlight">é•¿å­£é…’åº—</span>å æ¥¼æ¡ˆï¼Œç°åœ¨ä½ å¯ä»¥åœ¨å­¦æ ¡å®˜ç½‘ä¸­æœåˆ°æ›´å¤šå¤–éƒ¨æ–°é—»äº†ã€‚</p>
                    <p>è¿™å¯èƒ½å¯¹æ‚¨æ­£åœ¨è¿›è¡Œçš„å§”æ‰˜æœ‰æ‰€ç›¸å…³ã€‚æˆ‘è¿™é‡Œæœ‰ä¸€äº›é¢å¤–èµ„æ–™ï¼Œç›¸ä¿¡ä½ ä¼šæ„Ÿå…´è¶£ã€‚</p>
                    <p>èµ„æ–™åœ¨æœ¬é‚®ä»¶çš„<span class="email-highlight">é™„ä»¶</span>ä¸­ï¼Œæˆ‘åšäº†åŠ å¯†ä¿æŠ¤ï¼Œéœ€è¦<span class="email-highlight">å›ç­”æ­£ç¡®ç­”æ¡ˆ</span>æ‰èƒ½è§£é”ã€‚</p>
                    <p><span class="email-highlight">å…ˆè§£é”é™„ä»¶ï¼Œå†ç»™æˆ‘ç­”æ¡ˆå§</span>ã€‚æ¯•ç«Ÿä½ ä¹Ÿæ˜¯æƒ³ç»´æŠ¤æ­£ä¹‰çš„äººï¼Œå¯¹å§ï¼Ÿ</p>
                    
                    <!-- é™„ä»¶åŒºåŸŸ -->
                    <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid #E9ECF0;">
                        <p style="font-weight: 500; color: #4A5A6A; margin-bottom: 12px;">ğŸ“ é™„ä»¶ï¼ˆåŠ å¯†ï¼‰</p>
                        <div style="display: flex; gap: 16px; flex-wrap: wrap; align-items: stretch;">
                            <!-- é™„ä»¶1 -->
                            <div style="display: flex; flex-direction: column; width: fit-content;">
                                <div id="attachment1" style="cursor: pointer; padding: 8px 16px; background-color: #F8FAFC; border: 1px solid #E2E8F0; border-radius: 40px; display: flex; align-items: center; gap: 8px;">
                                    <span style="color: #C49A6C;">ğŸ“„</span> é™„ä»¶1ï¼šè°ƒæŸ¥ç¬”å½•
                                </div>
                                <div style="height: 26px;"></div>
                            </div>
                            
                            <!-- é™„ä»¶2 -->
                            <div style="display: flex; flex-direction: column; width: fit-content;">
                                <div id="attachment2" style="cursor: pointer; padding: 8px 16px; background-color: #F8FAFC; border: 1px solid #E2E8F0; border-radius: 40px; display: flex; align-items: center; gap: 8px;">
                                    <span style="color: #C49A6C;">ğŸ“„</span> é™„ä»¶2ï¼šå‚èµ›è€…ä¿¡æ¯
                                </div>
                                <div id="attachment2-error" style="color: #C45A6C; font-size: 13px; margin-top: 6px; min-height: 20px; text-align: center;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-reply" id="reject-farrell">æ‹’ç»å§”æ‰˜</button>
                <button class="btn-reply" id="accept-farrell">å›å¤é‚®ä»¶</button>
            </div>
        </div>
    </div>

    <!-- è®ºå›ç™»å½•å¼¹çª— -->
    <div class="modal-overlay hidden" id="forum-login-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 style="text-align: center;">åœ£æ¨±é«˜æ ¡å­¦ç”Ÿè®¤è¯</h3>
                <button class="close-btn" id="close-forum-login">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="login-form">
                    <div class="form-group">
                        <label class="form-label">è´¦å·</label>
                        <input type="text" class="form-input" id="forum-username">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¯†ç </label>
                        <input type="password" class="form-input" id="forum-password">
                    </div>
                    <div class="login-error" id="forum-login-error"></div>
                    <button class="btn-login" id="forum-login-btn">ç™»å½•</button>
                </div>
            </div>
        </div>
    </div>

    <!-- é‚®ç®±éªŒè¯å¼¹çª— -->
    <div class="modal-overlay hidden" id="email-verify-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>éªŒè¯é‚®ç®±åœ°å€</h3>
                <button class="close-btn" id="close-email-verify">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="email-verify-container">
                    <div class="email-hint">è¯·å¡«å†™å§”æ‰˜äººçš„é‚®ç®±åœ°å€</div>
                    <div class="email-input-wrapper">
                        <input type="text" class="email-prefix" id="email-prefix" placeholder="è¯·è¾“å…¥å‰ç¼€">
                        <span class="email-domain">@mail.com</span>
                    </div>
                    <div class="email-error" id="email-error"></div>
                    <button class="btn-email-submit" id="email-submit">éªŒè¯</button>
                </div>
            </div>
        </div>
    </div>

    <div class="progress-corner">
        <span>è°ƒæŸ¥è¿›åº¦</span>
        <span class="progress-value" id="progress-value">14/43</span>
    </div>

    <script>
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('current-time').textContent = `${hours}:${minutes}`;
        }
        updateTime();
        setInterval(updateTime, 1000);

        // é¡µé¢åˆ‡æ¢é€»è¾‘
        const pageProgressMap = {
            'mail': 1,
            'website': 2,
            'notice-forum': 3,
            'notice-library': 4,
            'notice-evaluation': 5
        };

        const pages = {
            mail: document.getElementById('page-mail'),
            website: document.getElementById('page-website'),
            'notice-forum': document.getElementById('page-notice-forum'),
            'notice-library': document.getElementById('page-notice-library'),
            'notice-evaluation': document.getElementById('page-notice-evaluation')
        };

        const tabMail = document.getElementById('tab-mail');
        const tabWebsite = document.getElementById('tab-website');
        const progressElement = document.getElementById('progress-value');

        function showPage(pageId) {
            Object.values(pages).forEach(page => {
                if (page) page.classList.add('hidden');
            });
            if (pages[pageId]) {
                pages[pageId].classList.remove('hidden');
            }
            if (pageId === 'mail') {
                tabMail.classList.add('active');
                tabWebsite.classList.remove('active');
            } else {
                tabWebsite.classList.add('active');
                tabMail.classList.remove('active');
            }
            const progress = pageProgressMap[pageId] || 1;
            progressElement.textContent = `${progress}/43`;
            window.location.hash = pageId;
        }

        function initFromHash() {
            const hash = window.location.hash.substring(1);
            if (hash && pages[hash]) {
                showPage(hash);
            } else {
                showPage('mail');
                progressElement.textContent = '0/43';
            }
        }

        window.addEventListener('hashchange', function() {
            const hash = window.location.hash.substring(1);
            if (hash && pages[hash]) {
                showPage(hash);
            }
        });

        tabMail.addEventListener('click', function() {
            showPage('mail');
        });

        tabWebsite.addEventListener('click', function() {
            showPage('website');
        });

        document.querySelectorAll('[data-page]').forEach(item => {
            item.addEventListener('click', function() {
                const pageId = this.getAttribute('data-page');
                showPage(pageId);
            });
        });

        document.querySelectorAll('[data-back]').forEach(link => {
            link.addEventListener('click', function() {
                const backTo = this.getAttribute('data-back');
                showPage(backTo);
            });
        });

        // ========== é‚®ä»¶å¼¹çª—é€»è¾‘ ==========
        const oldMailItem = document.getElementById('mail-1');
        const newMailItem = document.getElementById('mail-new');
        const jiangqingMailItem = document.getElementById('mail-jiangqing');
        const farrellMailItem = document.getElementById('mail-farrell');
        
        const oldEmailModal = document.getElementById('email-modal');
        const newEmailModal = document.getElementById('new-email-modal');
        const jiangqingModal = document.getElementById('jiangqing-modal');
        const farrellModal = document.getElementById('farrell-modal');
        
        const closeOldModal = document.getElementById('close-modal');
        const closeNewModal = document.getElementById('close-new-modal');
        const closeJiangqing = document.getElementById('close-jiangqing');
        const closeFarrell = document.getElementById('close-farrell');
        
        // æ‰“å¼€æ—§é‚®ä»¶å¼¹çª—
        oldMailItem.addEventListener('click', function() {
            oldEmailModal.classList.remove('hidden');
            progressElement.textContent = '1/43';
        });

        newMailItem.addEventListener('click', function() {
            newEmailModal.classList.remove('hidden');
            progressElement.textContent = '14/43';
        });

        // æ±Ÿæ¸…çš„é‚®ä»¶
        jiangqingMailItem.addEventListener('click', function() {
            jiangqingModal.classList.remove('hidden');
            progressElement.textContent = '33/43';
        });

        // Farrellçš„é‚®ä»¶
        farrellMailItem.addEventListener('click', function() {
            farrellModal.classList.remove('hidden');
            progressElement.textContent = '34/43';
        });

        // å…³é—­æ‰€æœ‰å¼¹çª—
        closeOldModal.addEventListener('click', function() {
            oldEmailModal.classList.add('hidden');
            progressElement.textContent = '0/43';
        });

        closeNewModal.addEventListener('click', function() {
            newEmailModal.classList.add('hidden');
            progressElement.textContent = '0/43';
        });

        closeJiangqing.addEventListener('click', function() {
            jiangqingModal.classList.add('hidden');
            progressElement.textContent = '0/43';
        });

        closeFarrell.addEventListener('click', function() {
            farrellModal.classList.add('hidden');
            progressElement.textContent = '0/43';
        });

        // ç‚¹å‡»èƒŒæ™¯å…³é—­æ‰€æœ‰å¼¹çª—
        oldEmailModal.addEventListener('click', function(e) {
            if (e.target === oldEmailModal) {
                oldEmailModal.classList.add('hidden');
                progressElement.textContent = '1/43';
            }
        });

        newEmailModal.addEventListener('click', function(e) {
            if (e.target === newEmailModal) {
                newEmailModal.classList.add('hidden');
                progressElement.textContent = '14/43';
            }
        });

        jiangqingModal.addEventListener('click', function(e) {
            if (e.target === jiangqingModal) {
                jiangqingModal.classList.add('hidden');
                progressElement.textContent = '33/43';
            }
        });

        farrellModal.addEventListener('click', function(e) {
            if (e.target === farrellModal) {
                farrellModal.classList.add('hidden');
                progressElement.textContent = '34/43';
            }
        });

        // ========== è®ºå›ç™»å½•å¼¹çª—é€»è¾‘ ==========
        const enterForumLink = document.getElementById('enter-forum-link');
        const forumLoginModal = document.getElementById('forum-login-modal');
        const closeForumLogin = document.getElementById('close-forum-login');
        const forumLoginBtn = document.getElementById('forum-login-btn');
        const forumUsername = document.getElementById('forum-username');
        const forumPassword = document.getElementById('forum-password');
        const forumLoginError = document.getElementById('forum-login-error');

        enterForumLink.addEventListener('click', function() {
            forumLoginModal.classList.remove('hidden');
            forumUsername.value = '';
            forumPassword.value = '';
            forumLoginError.textContent = '';
        });

        closeForumLogin.addEventListener('click', function() {
            forumLoginModal.classList.add('hidden');
        });

        forumLoginModal.addEventListener('click', function(e) {
            if (e.target === forumLoginModal) {
                forumLoginModal.classList.add('hidden');
            }
        });

        forumLoginBtn.addEventListener('click', function() {
            const username = forumUsername.value.trim();
            const password = forumPassword.value.trim();

            if (!username || !password) {
                forumLoginError.textContent = 'è¯·è¾“å…¥è´¦å·å’Œå¯†ç ';
                return;
            }

            if (username === 'linshizhanghao' && password === '889556') {
                window.open('10è®ºå›.html', '_blank');
                forumLoginModal.classList.add('hidden');
            } else {
                forumLoginError.textContent = 'è´¦å·/å¯†ç é”™è¯¯';
            }
        });

        forumPassword.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                forumLoginBtn.click();
            }
        });

        // ========== é™„ä»¶è§£é”ä¸å›¾ç‰‡æŸ¥çœ‹é€»è¾‘ï¼ˆå·²ä¿®æ”¹ï¼‰ ==========
        const attachment1Images = [
            'https://s1.img-e.com/20260220/69975753b78c2.jpg',
            'https://s1.img-e.com/20260219/69972233475f8.jpg'
        ];
        const attachment2Images = [
            'https://s1.img-e.com/20260219/69972ba4d02e0.jpg',
            'https://s1.img-e.com/20260219/69972ba4d7d76.jpg',
            'https://s1.img-e.com/20260219/69972ba4cffc4.jpg'
        ];

        let currentImageSet = [];
        let currentImageIndex = 0;
        let currentAttachmentType = null;
        
        // æ–°å¢ï¼šè®°å½•é™„ä»¶æ˜¯å¦å·²è§£é”
        let attachment1Unlocked = false;
        let attachment2Unlocked = false;

        const galleryModal = document.getElementById('image-gallery-modal');
        const galleryImage = document.getElementById('gallery-image');
        const galleryTitle = document.getElementById('gallery-title');
        const galleryCounter = document.getElementById('gallery-counter');
        const galleryPrev = document.getElementById('gallery-prev');
        const galleryNext = document.getElementById('gallery-next');
        const closeGallery = document.getElementById('close-gallery');

        const quizModal = document.getElementById('quiz-modal');
        const quizTitle = document.getElementById('quiz-title');
        const quizContent = document.getElementById('quiz-content');
        const closeQuiz = document.getElementById('close-quiz');

        // è·å–é™„ä»¶å…ƒç´ 
        const attachment1El = document.getElementById('attachment1');
        const attachment2El = document.getElementById('attachment2');
        const attachment2Error = document.getElementById('attachment2-error');

        // é™„ä»¶1ç‚¹å‡»äº‹ä»¶ - ä¿®æ”¹é€»è¾‘
        attachment1El.addEventListener('click', function() {
            if (attachment1Unlocked) {
                // å·²è§£é”ï¼Œç›´æ¥æŸ¥çœ‹
                currentImageSet = attachment1Images;
                currentImageIndex = 0;
                showGallery('é™„ä»¶1ï¼šè°ƒæŸ¥ç¬”å½•');
            } else {
                // æœªè§£é”ï¼Œæ˜¾ç¤ºè§£é”å¼¹çª—
                currentAttachmentType = 'attachment1';
                quizTitle.textContent = 'è§£é”é™„ä»¶1ï¼šè°ƒæŸ¥ç¬”å½•';
                quizContent.innerHTML = `
                    <div class="quiz-question">å®åŒ—å æ¥¼æ¡ˆçš„æ­»è€…å§“åï¼Ÿ</div>
                    <input type="text" class="quiz-input" id="quiz-answer" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ">
                    <div class="quiz-error" id="quiz-error" style="color: #C45A6C; font-size: 14px; text-align: center; min-height: 24px; margin: 8px 0;"></div>
                    <div style="display: flex; justify-content: center; gap: 12px;">
                        <button class="btn-reply" id="submit-quiz">ç¡®è®¤</button>
                        <button class="btn-secondary" id="cancel-quiz">å–æ¶ˆ</button>
                    </div>
                `;
                quizModal.classList.remove('hidden');
                quizModal.style.zIndex = '2500';
                
                document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
                document.getElementById('cancel-quiz').addEventListener('click', function() {
                    quizModal.classList.add('hidden');
                });
            }
        });

        // é™„ä»¶2ç‚¹å‡»äº‹ä»¶ - ä¿®æ”¹é€»è¾‘
        attachment2El.addEventListener('click', function() {
            if (!attachment1Unlocked) {
                attachment2Error.textContent = 'è¯·å…ˆè§£é”é™„ä»¶1';
                return;
            }
            
            if (attachment2Unlocked) {
                // å·²è§£é”ï¼Œç›´æ¥æŸ¥çœ‹
                currentImageSet = attachment2Images;
                currentImageIndex = 0;
                showGallery('é™„ä»¶2ï¼šèŠå¤©è®°å½•');
            } else {
                // æœªè§£é”ï¼Œæ˜¾ç¤ºè§£é”å¼¹çª—
                currentAttachmentType = 'attachment2';
                quizTitle.textContent = 'è§£é”é™„ä»¶2ï¼šå‚èµ›è€…ä¿¡æ¯';
                quizContent.innerHTML = `
                    <div class="quiz-question">ç‰©ç†ç«èµ›çš„çœŸæ­£å‚èµ›è€…ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰</div>
                    <div class="quiz-options">
                        <div class="quiz-option">
                            <input type="checkbox" id="opt1" value="ç¨‹è¿°ç™½">
                            <label for="opt1">ç¨‹è¿°ç™½</label>
                        </div>
                        <div class="quiz-option">
                            <input type="checkbox" id="opt2" value="æ±Ÿé›¨è–‡">
                            <label for="opt2">æ±Ÿé›¨è–‡</label>
                        </div>
                        <div class="quiz-option">
                            <input type="checkbox" id="opt3" value="å¶è“">
                            <label for="opt3">å¶è“</label>
                        </div>
                        <div class="quiz-option">
                            <input type="checkbox" id="opt4" value="å­£è¨€">
                            <label for="opt4">å­£è¨€</label>
                        </div>
                    </div>
                    <div class="quiz-error" id="quiz-error" style="color: #C45A6C; font-size: 14px; text-align: center; min-height: 24px; margin: 8px 0;"></div>
                    <div style="display: flex; justify-content: center; gap: 12px;">
                        <button class="btn-reply" id="submit-quiz">ç¡®è®¤</button>
                        <button class="btn-secondary" id="cancel-quiz">å–æ¶ˆ</button>
                    </div>
                `;
                quizModal.classList.remove('hidden');
                quizModal.style.zIndex = '2500';
                
                document.getElementById('submit-quiz').addEventListener('click', submitQuiz);
                document.getElementById('cancel-quiz').addEventListener('click', function() {
                    quizModal.classList.add('hidden');
                });
            }
        });

        function submitQuiz() {
            const errorElement = document.getElementById('quiz-error');
            
            if (currentAttachmentType === 'attachment1') {
                const answer = document.getElementById('quiz-answer').value.trim();
                if (answer === 'å¶è“') {
                    errorElement.textContent = '';
                    quizModal.classList.add('hidden');
                    attachment1Unlocked = true;  // æ ‡è®°é™„ä»¶1å·²è§£é”
                    attachment2Error.textContent = ''; // æ¸…é™¤é™„ä»¶2é”™è¯¯æç¤º
                    // è§£é”åç«‹å³æ˜¾ç¤º
                    currentImageSet = attachment1Images;
                    currentImageIndex = 0;
                    showGallery('é™„ä»¶1ï¼šè°ƒæŸ¥ç¬”å½•');
                } else {
                    errorElement.textContent = 'ä½ å¯èƒ½éœ€è¦å†æƒ³æƒ³â€¦';
                }
            } else if (currentAttachmentType === 'attachment2') {
                const checked = [];
                document.querySelectorAll('#quiz-content input[type="checkbox"]:checked').forEach(cb => {
                    checked.push(cb.value);
                });
                const correct = ['ç¨‹è¿°ç™½', 'æ±Ÿé›¨è–‡', 'å¶è“'];
                const isCorrect = correct.every(name => checked.includes(name)) && 
                                 checked.length === 3 && 
                                 !checked.includes('å­£è¨€');
                
                if (isCorrect) {
                    errorElement.textContent = '';
                    quizModal.classList.add('hidden');
                    attachment2Unlocked = true;  // æ ‡è®°é™„ä»¶2å·²è§£é”
                    // è§£é”åç«‹å³æ˜¾ç¤º
                    currentImageSet = attachment2Images;
                    currentImageIndex = 0;
                    showGallery('é™„ä»¶2ï¼šèŠå¤©è®°å½•');
                } else {
                    errorElement.textContent = 'ä½ å¯èƒ½éœ€è¦å†æƒ³æƒ³â€¦';
                }
            }
        }

        function showGallery(title) {
            galleryTitle.textContent = title;
            updateGalleryImage();
            galleryModal.style.zIndex = '3000';
            galleryModal.classList.remove('hidden');
        }

        function updateGalleryImage() {
            if (currentImageSet.length > 0) {
                galleryImage.src = currentImageSet[currentImageIndex];
                galleryCounter.textContent = `${currentImageIndex + 1}/${currentImageSet.length}`;
                galleryPrev.disabled = currentImageIndex === 0;
                galleryNext.disabled = currentImageIndex === currentImageSet.length - 1;
            }
        }

        galleryPrev.addEventListener('click', function() {
            if (currentImageIndex > 0) {
                currentImageIndex--;
                updateGalleryImage();
            }
        });

        galleryNext.addEventListener('click', function() {
            if (currentImageIndex < currentImageSet.length - 1) {
                currentImageIndex++;
                updateGalleryImage();
            }
        });

        closeGallery.addEventListener('click', function() {
            galleryModal.classList.add('hidden');
        });

        galleryModal.addEventListener('click', function(e) {
            if (e.target === galleryModal) {
                galleryModal.classList.add('hidden');
            }
        });

        closeQuiz.addEventListener('click', function() {
            quizModal.classList.add('hidden');
        });

        quizModal.addEventListener('click', function(e) {
            if (e.target === quizModal) {
                quizModal.classList.add('hidden');
            }
        });

        // ========== å æ¥¼æ¡ˆé‚®ä»¶æŒ‰é’®é€»è¾‘ ==========
        document.getElementById('reject-farrell').addEventListener('click', function() {
            window.location.href = 'ç»“å±€A.html';
        });

        document.getElementById('accept-farrell').addEventListener('click', function() {
            window.open('ç»“å±€åˆ¤æ–­.html', '_blank');
        });

        // åˆå§‹åŒ–é¡µé¢
        initFromHash();
    </script>
    <script src="search.js"></script>
</body>
</html>
